(this["webpackJsonpdev-awesome-tool"]=this["webpackJsonpdev-awesome-tool"]||[]).push([[0],{18:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(3),o=a(6),c=a(4),s=a(17),l=a(0),i=a.n(l),d=a(5),h=a.n(d),u=(a(23),a(13)),g=a.n(u),p=a(14),k=a(16),b=a(8),j=a.n(b),v=a(1),f="YYYYMMDD";new Date(2020,1,1);function O(e){var t;if(console.log("props.graph_data"),console.log(e.graph_data),e.ticker){var a=[[{type:"date",label:"Day"},"Closing Price for "+e.ticker,"Predicted Closing Price for "+e.ticker]].concat(e.graph_data);console.log("data"),console.log(a),t=Object(v.jsx)(p.a,{width:"100%",height:"500",chartType:"Line",loader:Object(v.jsx)("div",{children:"Loading Chart"}),data:a,options:{chart:{title:"Historical and Predicted Closing Prices for "+e.ticker},width:900,height:500,series:{0:{color:"#e2431e"},1:{color:"#1c91c0"}},axes:{y:{Price:{label:"Closing Price"}}}},rootProps:{"data-testid":"4"}})}else console.log("showing nothing"),t=null;return t}function y(e,t){console.log("getGraphDataFromTicker - raw_data"),console.log(e);Object.keys(e.historical[t]).concat(Object.keys(e.predictions[t]));var a=Object.keys(e.historical[t]),r=a[a.length-1],n=Object.keys(e.predictions[t]),o=new Array;return(o=o.concat(a.map((function(a){return[j()(a,f).toDate(),e.historical[t][a],null]})))).push([j()(r,f).toDate(),e.historical[t][r],e.historical[t][r]]),o=o.concat(n.map((function(a){return[j()(a,f).toDate(),null,e.predictions[t][a]]})))}var _=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).raw_data=null,n.tickers=null,n.state={response:null,ticker:null,graph_data:null},n.loadDataFromAPI(Object(o.a)(n)),n}return Object(n.a)(a,[{key:"loadDataFromAPI",value:function(e){if(e.state.graph_data)console.log("Not pulling new data");else{console.log("Pulling data");var t="date=today&label_column=Close";console.log("request_data"),console.log(t),g.a.post("https://backend.danshiebler.com/prediction",t,(function(t){console.log("Received response, setting variables"),console.log(t),e.raw_data=t.data,e.tickers=Object.keys(e.raw_data.historical),e.setState({response:null,ticker:e.tickers[0],graph_data:y(e.raw_data,e.tickers[0])}),e.render()}),"json")}}},{key:"handleSelectChange",value:function(e){this.setState({response:this.state.response,ticker:e.value,graph_data:y(this.raw_data,e.value)})}},{key:"renderGraph",value:function(){return Object(v.jsx)(O,{ticker:this.state.ticker,graph_data:this.state.graph_data})}},{key:"renderSelect",value:function(){var e=this,t=null;if(this.tickers){var a=this.tickers.map((function(e){return{value:e,label:e}}));t=Object(v.jsx)(k.a,{options:a,onChange:function(t){return e.handleSelectChange(t)}}),console.log(t)}return t}},{key:"render",value:function(){return console.log("rendering"),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"graph",children:this.renderGraph()}),Object(v.jsx)("div",{className:"select",children:this.renderSelect()})]})}}]),a}(i.a.Component);h.a.render(Object(v.jsx)(_,{}),document.getElementById("root"))},23:function(e,t,a){}},[[18,1,2]]]);
//# sourceMappingURL=main.b1402711.chunk.js.map